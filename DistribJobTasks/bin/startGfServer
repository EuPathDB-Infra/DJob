#!@perl@

## starts gfServer with cmd: gfServer -canStop start localhost port 
## checks status with gfServer status localhost port 
##every 10 seconds until 0 is returned

use strict;
use Getopt::Long;

my($port,$path,$dir);
&GetOptions('nodePort=i' => \$port,
            'binPath=s' => \$path,
	    'targetDir=s' => \$dir);

($path && $port && $dir) ||
	die "Usage:startGfServer --nodePort --binPath <gfServer/gfClient path> --targetDir";  


system("${path}/gfServer -canStop start localhost $port $targetDir/*.nib &");

while(system("gfServer status localhost $port")){
	sleep(10);
}

return;
