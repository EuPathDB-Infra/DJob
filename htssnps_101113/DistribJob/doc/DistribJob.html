<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="DistribJob_files/filelist.xml">
<title>DistribJob – Distributed Job Controller</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="City"/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Valued Gateway Client</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>stevef</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>1</o:TotalTime>
  <o:Created>2002-08-29T18:10:00Z</o:Created>
  <o:LastSaved>2002-08-29T18:10:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>2192</o:Words>
  <o:Characters>12497</o:Characters>
  <o:Lines>104</o:Lines>
  <o:Paragraphs>29</o:Paragraphs>
  <o:CharactersWithSpaces>14660</o:CharactersWithSpaces>
  <o:Version>10.2625</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:GrammarState>Clean</w:GrammarState>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	mso-font-kerning:16.0pt;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";
	font-style:italic;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;
	mso-bidi-font-family:"Times New Roman";}
h4
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:14.0pt;
	font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:187839074;
	mso-list-type:hybrid;
	mso-list-template-ids:995150746 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l1
	{mso-list-id:316080629;
	mso-list-type:hybrid;
	mso-list-template-ids:-1844383716 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l1:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l2
	{mso-list-id:1053499881;
	mso-list-type:hybrid;
	mso-list-template-ids:857784000 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l2:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l2:level2
	{mso-level-number-format:bullet;
	mso-level-text:o;
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
@list l2:level3
	{mso-level-number-format:bullet;
	mso-level-text:\F0A7;
	mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Wingdings;}
@list l3
	{mso-list-id:1090782505;
	mso-list-type:hybrid;
	mso-list-template-ids:1705772514 67698703 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l3:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l3:level2
	{mso-level-number-format:alpha-lower;
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l3:level3
	{mso-level-number-format:roman-lower;
	mso-level-tab-stop:1.5in;
	mso-level-number-position:right;
	text-indent:-9.0pt;}
@list l4
	{mso-list-id:1101533828;
	mso-list-type:hybrid;
	mso-list-template-ids:298884234 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l5
	{mso-list-id:1144545647;
	mso-list-type:hybrid;
	mso-list-template-ids:1569861790 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l6
	{mso-list-id:1821922426;
	mso-list-type:hybrid;
	mso-list-template-ids:291266094 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l7
	{mso-list-id:1903323165;
	mso-list-type:hybrid;
	mso-list-template-ids:-276692944 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l8
	{mso-list-id:2129931202;
	mso-list-type:hybrid;
	mso-list-template-ids:-243400400 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l8:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]-->
</head>

<body lang=EN-US style='tab-interval:.5in'>

<div class=Section1>

<h1 align=center style='text-align:center'>DistribJob – <i>A Distributed Job
Controller<o:p></o:p></i></h1>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h2>Overview</h2>

<p class=MsoNormal>DistribJob is a distributed job controller: it distributes
elements of an input set to nodes in a compute cluster for processing, and
merges the result. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>More specifically, the <i>controller</i> runs on a <i>server</i>.<span
style='mso-spacerun:yes'>  </span>It breaks a large <i>input set</i> into
smaller sets called <i>subtasks</i>, and assigns the subtasks to compute <i>slots</i>
on <i>nodes</i> (machines) as they become available.<span
style='mso-spacerun:yes'>  </span>On the node, it runs a <i>command</i> on the
subtask’s input, and merges the result into the <i>main result</i> on the
server.<span style='mso-spacerun:yes'>  </span>It robustly tracks failures and
can be restarted.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>DistribJob does not do scheduling or load balancing.<span
style='mso-spacerun:yes'>  </span>For a particular job, it is given a static
set of nodes, each with a static number of slots.<span
style='mso-spacerun:yes'>  </span>When a slot is vacated, DistribJob fills it
with the next subtask.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>DistribJob is written in Perl, using Perl objects and
modules. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Caveat:<span style='mso-spacerun:yes'>  </span>DistribJob is
academic software.<span style='mso-spacerun:yes'>  </span>It has been
extensively used and tested, and is robust.<span style='mso-spacerun:yes'> 
</span>However, its installation, documentation and usage are not brought to
the level of industry polish.<span style='mso-spacerun:yes'>  </span>For
example, some of the steps below forego thorough handholding, expecting instead
for you to open a Perl file here or a test file there.<span
style='mso-spacerun:yes'>  </span>None of the steps are hard.<span
style='mso-spacerun:yes'>  </span><span class=GramE>Just rough-cut.</span></p>

<h2>Installation</h2>

<p class=MsoNormal>DistribJob comes in two modules: the DistribJob module
itself, which is the core, and, the optional DistribJobTasks module, which
includes a set of predefined bioinformatics <span class=GramE>tasks</span>
(“tasks” are defined below).<span style='mso-spacerun:yes'>  </span>The latter
are useful as samples, even if the particular tasks included are not relevant
to your application.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>To install either one, acquire the distribjob package
(either through downloading or cvs).<span style='mso-spacerun:yes'> 
</span>Then follow the instructions in the <span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>DistribJob/readme.txt</span> file or <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJobTasks/readme.txt</span>.<span
style='mso-spacerun:yes'>  </span>Installing DistribJobTasks will also install
DistribJob (but not vice versa).</p>

<h3>Testing your installation</h3>

<p class=MsoNormal>DistribJob and DistribJobTasks include a set of tests.<span
style='mso-spacerun:yes'>  </span>You are advised to run these before
proceeding.</p>

<h4>Basic local test</h4>

<p class=MsoNormal>Once you have completed the installation, the first test is:</p>

<p class=MsoNormal><span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'><span style='mso-spacerun:yes'>   </span>% </span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>distribjob
$HOME/test/DistribJob/input/controller_local.prop 1 2</span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>This test should work right out of the box if you installed
your test/ directory into $HOME.<span style='mso-spacerun:yes'> 
</span>Otherwise, edit <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>test/DistribJob/input/controller_local.prop</span>.<span
style='mso-spacerun:yes'>  </span>Change the values of properties that refer to
files in the test/ directory to reflect the actual location of test/.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The test should produce output that looks like this:</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoBodyTextIndent><span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt'>[sfischer@pythia ~]$ <span class=GramE>distribjob</span>
test/DistribJob/input/controller_local.prop 1 2<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><st1:City><st1:place><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
  mso-bidi-font-family:"Times New Roman"'>Reading</span></st1:place></st1:City><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> properties from test/DistribJob/input/controller_local.prop<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><st1:City><st1:place><span
  style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
  mso-bidi-font-family:"Times New Roman"'>Reading</span></st1:place></st1:City><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> properties from
/home/sfischer/test/DistribJob/input/task.prop<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Finding
input set size<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Input
set size is 30<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Subtask
set size is 3 (10 subtasks)<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Initializing
server...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Initializing
node 1...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Initializing
node 2...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>dispatching</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> subTask 1 to node 1.1<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>dispatching</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> subTask 2 to node 2.1<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>subTask</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> 2 failed<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>dispatching</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> subTask 3 to node 2.1<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>......<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>subTask</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> 1 succeeded<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>dispatching</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> subTask 4 to node 1.1<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>subTask</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> 3 succeeded<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>…<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span class=GramE><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>subTask</span></span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'> 9 succeeded<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Cleaning
up nodes...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Failure:
2 subtasks failed<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>Please
look in /home/sfischer/test/master/failures/*/result<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>After
analyzing and correcting failures:<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><span
style='mso-spacerun:yes'>  </span>1. <span class=GramE>mv</span>
/home/sfischer/test/master/failures /home/sfischer/test/master/failures.save<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><span
style='mso-spacerun:yes'>  </span>2. <span class=GramE>set</span> restart=yes
in test/DistribJob/input/controller_local.prop<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><span
style='mso-spacerun:yes'>  </span>3. <span class=GramE>restart</span> the job</span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The test purposely includes two subtasks that fail.<span
style='mso-spacerun:yes'>  </span>This will give you the chance to practice
correcting failures and restarting.<span style='mso-spacerun:yes'>  </span>The
source of the problem is that two of the lines in test/DistribJob/input/inputset
(which is the input for this job) have “oops” on them.<span
style='mso-spacerun:yes'>  </span>To correct the problem:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l0 level1 lfo9;tab-stops:list .5in'>Edit
     that file, removing the oops</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo9;tab-stops:list .5in'>Remove
     the master/failures directory</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo9;tab-stops:list .5in'>Set
     the property restart=yes in controller_local.prop</li>
 <li class=MsoNormal style='mso-list:l0 level1 lfo9;tab-stops:list .5in'>Start
     the job again.</li>
</ul>

<h4>Basic liniac test</h4>

<p class=MsoNormal>This test is exclusively for UPenn’s Liniac.<span
style='mso-spacerun:yes'>  </span>To run it:</p>

<p class=MsoBodyTextIndent>% cd $HOME/test</p>

<p class=MsoBodyTextIndent>% liniacsubmit 2 2
$HOME/test/DistribJob/input/controller_liniac.prop</p>

<p class=MsoNormal>The immediate output is the message confirming entry to the
queue.</p>

<p class=MsoNormal>Once the queue runs the job, its output (identical to that
from the local test) will appear in $HOME/test/xxxxx where xxxxx is the log
file starting with the queue’s job id.</p>

<h4>DistribJobTasks tests</h4>

<p class=MsoNormal>The bioinformatics tasks included in the DistribJobTasks
module also have tests.<span style='mso-spacerun:yes'>  </span>Run these in a
similar fashion to the basic tests.<span style='mso-spacerun:yes'>  </span>You
may need to edit the task.prop files to specify where your bioinformatics
resources are.</p>

<h2>Specifying your task</h2>

<p class=MsoNormal>You provide a <i>task</i> to DistribJob (see configuration
below).<span style='mso-spacerun:yes'>  </span>The task determines:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l8 level1 lfo2;tab-stops:list .5in'>The
     allowable type of input</li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo2;tab-stops:list .5in'>How
     the input is subdivided into subtasks</li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo2;tab-stops:list .5in'>How
     the server is to be initialized before the task starts</li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo2;tab-stops:list .5in'>How
     each node is to be initialized before the task starts</li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo2;tab-stops:list .5in'>What
     command to run on the node for each subtask</li>
 <li class=MsoNormal style='mso-list:l8 level1 lfo2;tab-stops:list .5in'>How to
     merge the subtask results into the main result</li>
</ul>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Chose from the built-in tasks provided by the
DistribJobTasks module, or code your own task.</p>

<h3>Coding your own task (advanced)</h3>

<p class=MsoNormal>To code your own task, you will need to write a subclass of
DistribJob::Task.<span style='mso-spacerun:yes'>  </span>For samples, see:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l6 level1 lfo3;tab-stops:list .5in'><span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob/lib/perl/DistribJob/SampleTask.pm</span></li>
 <li class=MsoNormal style='mso-list:l6 level1 lfo3;tab-stops:list .5in'><span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJobTasks/lib/perl/DistribJobTasks/*Task.pm</span></li>
</ul>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>You will also need to define the command that will run your
subtasks on the nodes.<span style='mso-spacerun:yes'>  </span>The command must:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l5 level1 lfo4;tab-stops:list .5in'>Take
     as input a subset of the original input.<span style='mso-spacerun:yes'> 
     </span>It may restrict itself to only one element of input, but would
     probably be more efficient if it can handle a set.<span
     style='mso-spacerun:yes'>  </span>(This depends on the speed with which a
     single element is processed.<span style='mso-spacerun:yes'>  </span>The
     subtask should run for at least a few seconds to mitigate the overhead of
     passing data back and forth between the server and the node.)</li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo4;tab-stops:list .5in'>Accept
     full path names on all input files</li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo4;tab-stops:list .5in'>Write
     all temp files to the directory in which it runs. </li>
 <li class=MsoNormal style='mso-list:l5 level1 lfo4;tab-stops:list .5in'>Terminate
     with non-zero status on any error condition that might need to be
     corrected.<span style='mso-spacerun:yes'>  </span></li>
</ul>

<h2>Constraints on input</h2>

<p class=MsoNormal>Following are constraints that apply to your task’s input:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l4 level1 lfo5;tab-stops:list .5in'>The
     input must be conceptually an array.<span style='mso-spacerun:yes'> 
     </span>The controller will provide the task with the starting and ending
     indices of a subtask, and the task must provide a file or files that
     represent the associated elements for that range of the original input.</li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo5;tab-stops:list .5in'>The
     order of processing the elements must not matter</li>
 <li class=MsoNormal style='mso-list:l4 level1 lfo5;tab-stops:list .5in'>You
     may not delete or add elements from or to the input when restarting a job.</li>
</ul>

<h2>Using built-in nodes</h2>

<p class=MsoNormal>DistribJob distributes the subtasks to <i>nodes</i> (ie,
machines in a cluster).<span style='mso-spacerun:yes'>  </span>You will specify
how many compute <i>slots</i> each node has when you configure DistribJob
(discussed below).<span style='mso-spacerun:yes'>  </span>The DistribJob
package includes two built in types of node:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l1 level1 lfo1;tab-stops:list .5in'><b><span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob::BprocNode</span></b>
     is a node in a BPROC cluster (such as UPenn’s Liniac).</li>
 <li class=MsoNormal style='mso-list:l1 level1 lfo1;tab-stops:list .5in'><b><span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob::LocalNode</span></b>
     is a virtual node running on your local machine.</li>
</ul>

<p class=MsoNormal>The former is only applicable if you have a BPROC
cluster.<span style='mso-spacerun:yes'>  </span>The latter can be run on any
multi-processor or even single-processor machine, where it is efficient to have
more than one subtask running at a time.</p>

<h2>Coding your own node (guru)</h2>

<p class=MsoNormal>If your cluster uses a process control system other than
BPROC, you can still use DistribJob, but you need to write some simple
code.<span style='mso-spacerun:yes'>  </span><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>DistribJob::Node</span> is the object
which represents a node.<span style='mso-spacerun:yes'>  </span>Its main
purpose is to specify how to communicate between the server and node.<span
style='mso-spacerun:yes'>  </span>The details of particular types of nodes are
specified by subclasses of <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>DistribJob::Node</span>, which is what you will need to
write.<span style='mso-spacerun:yes'>  </span>To learn how, use <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob::BprocNode</span>
and <span style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob::LocalNode</span>
as samples.<span style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>You may also want to help your user by providing a
cluster-specific startup script.<span style='mso-spacerun:yes'>  </span>This
script will submit a job to your cluster’s queue, and then call <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>distribjob</span>
(see <span class=GramE>Running</span> below) when the job is ready to run.<span
style='mso-spacerun:yes'>  </span>As <span class=GramE>a sample see</span> <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob/bin/liniacsubmit</span>
which submits a job to UPenn’s Liniac cluster.<span style='mso-spacerun:yes'> 
</span>Also see <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>DistribJob/bin/liniacjob,</span> which is the script that
runs.<span style='mso-spacerun:yes'>  </span>It in turn calls <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>distribjob</span>.</p>

<h2>Setting up to run</h2>

<p class=MsoNormal>The first step is to decide where you want your input
directory, and where you want your master directory.<span
style='mso-spacerun:yes'>  </span>Typically, these will go in a directory
dedicated to this run of your task.<span style='mso-spacerun:yes'>  </span>Just
make sure there is enough storage space to accommodate your results.</p>

<p class=MsoNormal>As an example, lets say you chose to run in $HOME/myrun, and
that your task is creating a BLAST matrix (one of the provided bioinformatics
tasks).<span style='mso-spacerun:yes'>  </span>Create your input directory, and
copy the input file to it (in this case, a set of DNA sequences).</p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% mkdir –r $HOME/myrun/input<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% cp myseqs.fsa $HOME/myrun/input<o:p></o:p></span></p>

<h3>Configuring</h3>

<p class=MsoNormal>Create two configuration files for your task (the standard
place for them is your input directory):</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l7 level1 lfo6;tab-stops:list .5in'><span
     class=GramE><b><span style='font-family:"Courier New";mso-bidi-font-family:
     "Times New Roman"'>controller.prop</span></b></span> contains the
     properties required by the controller.<span style='mso-spacerun:yes'> 
     </span>To see sample values required for this file, look in <span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob/test/input/controller_*.prop</span>.<span
     style='mso-spacerun:yes'>  </span>The properties are explained in detail
     in the full help for the distribjob <span class=GramE>command<span
     style='mso-spacerun:yes'>  </span>(</span><span style='font-family:"Courier New";
     mso-bidi-font-family:"Times New Roman"'>distribjob –help</span>).<span
     style='mso-spacerun:yes'>  </span>(You can name this file whatever you
     like, but <span style='font-family:"Courier New";mso-bidi-font-family:
     "Times New Roman"'>controller.prop</span> is the convention).</li>
 <li class=MsoNormal style='mso-list:l7 level1 lfo6;tab-stops:list .5in'><span
     style='mso-spacerun:yes'> </span><span class=GramE><b><span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>task.prop</span></b></span>
     contains the properties required by your task.<span
     style='mso-spacerun:yes'>  </span>If you are using one of the provided
     bioinformatics tasks, find sample task.prop files in <span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJobTasks/test/*_input/task.prop</span>.<span
     style='mso-spacerun:yes'>  </span>In addition, the properties are defined
     in Perl files which subclass Task.pm.<span style='mso-spacerun:yes'> 
     </span>Look in <span style='font-family:"Courier New";mso-bidi-font-family:
     "Times New Roman"'>DistribJobTasks/lib/perl.</span></li>
</ul>

<h3>Other resources</h3>

<p class=MsoNormal>You may need to make other resources available to your
task.<span style='mso-spacerun:yes'>  </span>For example, the provided
BlastMatrixTask and BlastSimilarityTask make use of a database of sequences to
BLAST against.<span style='mso-spacerun:yes'>  </span>This file may be very
large, and so, you will not want to copy it into your input directory.<span
style='mso-spacerun:yes'>  </span>In this case, you just specify the resource’s
location using the appropriate property in your task.prop file.</p>

<h2>Running</h2>

<p class=MsoNormal>The <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>distribjob</span> command starts the controller.<span
style='mso-spacerun:yes'>  </span>Running it with no arguments prints its
usage.<span style='mso-spacerun:yes'>  </span>Running it with <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>–help</span>
prints its full help display. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>You use different commands to run locally or to run on
different clusters.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Regardless of how you run, the result of all the subtasks
will be merged into <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>master/mainresult</span>.</p>

<h3>Running locally</h3>

<p class=MsoNormal>If you use <span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>DistribJob::LocalNode</span> as your
node type, you are running locally (ie, on your local server).<span
style='mso-spacerun:yes'>  </span>You do not need to submit your job to a
cluster queue; you just run <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>distribjob</span> directly.<span style='mso-spacerun:yes'> 
</span>To do so, use this command (if, for example, you want to distribute
across 3 virtual nodes):</p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% distribjob your_controller.prop 1 2 3<o:p></o:p></span></p>

<h3>Running on UPenn’s Liniac cluster</h3>

<p class=MsoNormal>You are assumed to know how to use UPenn’s Liniac
cluster.<span style='mso-spacerun:yes'>  </span>To run <span style='font-family:
"Courier New";mso-bidi-font-family:"Times New Roman"'>distribjob</span> on the
Liniac, set the <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>nodeClass</span> property in your <span style='font-family:
"Courier New";mso-bidi-font-family:"Times New Roman"'>controller.prop</span>
file to <span style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>DistribJob::BprocNode</span>.<span
style='mso-spacerun:yes'>  </span><span class=GramE>You.</span><span
style='mso-spacerun:yes'>  </span>Rather than calling <span style='font-family:
"Courier New";mso-bidi-font-family:"Times New Roman"'>distribjob</span>
directly, submit your distributed job to the Liniac’s queue by calling <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>liniacsubmit</span>.<span
style='mso-spacerun:yes'>  </span>Here is its usage:</p>

<p class=MsoBodyTextIndent>% liniacsubmit nodecount minutes
controllerPropFileFullPath<span style='font-family:"Times New Roman"'><o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span class=GramE><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>liniacsubmit</span></span> produces as
immediate output the standard queue submission report.<span
style='mso-spacerun:yes'>  </span>If you want to run on 20 nodes and estimate
your job will take 10 hours, use this:</p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% cd where_I_want_my_log/<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% liniacsubmit 20 600
/my_inputdir/controller.prop</span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>When the queue runs your job, it will place the job’s log in
the directory where you ran <span style='font-family:"Courier New";mso-bidi-font-family:
"Times New Roman"'>liniacsubmit</span>.<span style='mso-spacerun:yes'> 
</span>Check this log to see your job progress.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>To see the status of your job on the queue, run:</p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% showq</span></p>

<h3>Running on a different type of cluster</h3>

<p class=MsoNormal>If you plan on running on a cluster type other than UPenn’s
Liniac, you or your administrator will need to provide commands that parallel <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>liniacsubmit</span>
and <span style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>liniacjob</span>.</p>

<h2>Handling problems</h2>

<p class=MsoNormal>These are the kinds of problems you may encounter:</p>

<ul style='margin-top:0in' type=disc>
 <li class=MsoNormal style='mso-list:l2 level1 lfo7;tab-stops:list .5in'><b>False
     starts</b>: annoying little errors that prevent your job from really
     running</li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo7;tab-stops:list .5in'><b>Failures</b>:<span
     style='mso-spacerun:yes'>  </span>the subtask running on a node dies
     because of</li>
 <ul style='margin-top:0in' type=circle>
  <li class=MsoNormal style='mso-list:l2 level2 lfo7;tab-stops:list 1.0in'>reproducible
      problems</li>
  <ul style='margin-top:0in' type=square>
   <li class=MsoNormal style='mso-list:l2 level3 lfo7;tab-stops:list 1.5in'>missing
       executables</li>
   <li class=MsoNormal style='mso-list:l2 level3 lfo7;tab-stops:list 1.5in'>missing
       files or directories</li>
   <li class=MsoNormal style='mso-list:l2 level3 lfo7;tab-stops:list 1.5in'>data
       errors in the input</li>
  </ul>
  <li class=MsoNormal style='mso-list:l2 level2 lfo7;tab-stops:list 1.0in'>non-reproducible
      problems</li>
  <ul style='margin-top:0in' type=square>
   <li class=MsoNormal style='mso-list:l2 level3 lfo7;tab-stops:list 1.5in'>the
       node goes weird</li>
   <li class=MsoNormal style='mso-list:l2 level3 lfo7;tab-stops:list 1.5in'>the
       command goes weird </li>
  </ul>
 </ul>
 <li class=MsoNormal style='mso-list:l2 level1 lfo7;tab-stops:list .5in'><b>Hung
     jobs</b>: the subtask running on a node gets hung<b><o:p></o:p></b></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo7;tab-stops:list .5in'><b>Wrong
     number of nodes</b>: you realize that you want to add more (or take away
     some) nodes.<span style='mso-spacerun:yes'>  </span>To do this, kill and
     restart with the desired number of nodes (see below).<b><o:p></o:p></b></li>
 <li class=MsoNormal style='mso-list:l2 level1 lfo7;tab-stops:list .5in'><b>Need
     to kill</b>: you realize that you need to kill your job<b><o:p></o:p></b></li>
</ul>

<h3>False starts</h3>

<p class=MsoNormal>These are errors in which the job immediately fails, and no
work is dispatched to the nodes.<span style='mso-spacerun:yes'>  </span>The
most common reason is that you have an error in a configuration file. The log
should explain the problem although it might be a little less-than-obvious.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Once you have corrected the problem, you need to delete your
master directory, and start again.</p>

<h3>Failures</h3>

<p class=MsoNormal>When a subtask running on a node fails, the log will report
the failures and the job’s files are copied to a directory in <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>master/failures/subtask_nnn/result</span>.<span
style='mso-spacerun:yes'>  </span>Look carefully in all the files to determine
the cause of the failure.<span style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>If the problem appears to be one that will happen
reproducibly, then you need to correct the source of the problem.<span
style='mso-spacerun:yes'>  </span>For example, you may need to correct your
input file (but don’t delete or add elements… this will mess up the indexing
used by the controller).<span style='mso-spacerun:yes'>  </span>Or, you may
need to provide missing data or executable files.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>If the problem seems like a random flux of the cosmos, then
you can defer correcting the source of the problem.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>After you have handled all the failures, and when your job
is no longer running, delete the <span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>master/failures/</span> directory and
restart the job (see below).</p>

<h3>Hung subtasks</h3>

<p class=MsoNormal>The directory <span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>master/running</span> contains
subdirectories for each running subtask.<span style='mso-spacerun:yes'> 
</span>Hung subtasks will have subdirectories there whose subtask number should
have long since come and gone.<span style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>If you detect a hung subtask, you will need to kill your job
and restart (see below).<span style='mso-spacerun:yes'>  </span>You can either
wait till the rest of the subtasks are complete or, if you feel that the hung
subtask(s) is(are) using resources that you would rather have working for you,
you can kill forthwith.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h3>Need to kill</h3>

<p class=MsoNormal>You may need to kill your job, either because you have hung
subtasks, or because it turns out to be a virus bent on conquering the
world.<span style='mso-spacerun:yes'>  </span>There are two steps you need to
take:</p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l3 level1 lfo8;tab-stops:list .5in'>kill
     the distribjob controller:</li>
 <ol style='margin-top:0in' start=1 type=a>
  <li class=MsoNormal style='mso-list:l3 level2 lfo8;tab-stops:list 1.0in'>kill
      it as soon as possible (without corrupting its results):</li>
 </ol>
</ol>

<p class=MsoNormal style='margin-left:1.5in;text-indent:-1.5in;mso-text-indent-alt:
-9.0pt;mso-list:l3 level3 lfo8;tab-stops:list 1.5in'><![if !supportLists]><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-list:Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% distribjob controllerPropFileFullPath
–kill<o:p></o:p></span></p>

<ol style='margin-top:0in' start=1 type=1>
 <ol style='margin-top:0in' start=2 type=a>
  <li class=MsoNormal style='mso-list:l3 level2 lfo8;tab-stops:list 1.0in'>kill
      it without interrupting running subtasks:</li>
 </ol>
</ol>

<p class=MsoNormal style='margin-left:1.5in;text-indent:-1.5in;mso-text-indent-alt:
-9.0pt;mso-list:l3 level3 lfo8;tab-stops:list 1.5in'><![if !supportLists]><span
style='font-family:"Courier New";mso-fareast-font-family:"Courier New"'><span
style='mso-list:Ignore'><span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]><span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>% distribjob controllerPropFileFullPath
–killslow<o:p></o:p></span></p>

<ol style='margin-top:0in' start=2 type=1>
 <li class=MsoNormal style='mso-list:l3 level1 lfo8;tab-stops:list .5in'>If you
     are running in a queue, kill the job in the queue.<span
     style='mso-spacerun:yes'>  </span>(On UPenn’s Liniac, use the <span
     style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>canceljob</span>
     command).<span style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'><o:p></o:p></span></li>
</ol>

<h2>Restarting</h2>

<p class=MsoNormal>To restart a job, change the <span style='font-family:"Courier New";
mso-bidi-font-family:"Times New Roman"'>restart</span> property in the <span
style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>controller.prop</span>
file to <span style='font-family:"Courier New";mso-bidi-font-family:"Times New Roman"'>yes</span>,
and start the job the same way you did the first time.<span
style='mso-spacerun:yes'>  </span>Subtasks that are already complete will be
skipped.<span style='mso-spacerun:yes'>  </span>(This is controlled by the file
master/ completedSubtasks.log, which is a list of completed subtasks.<span
style='mso-spacerun:yes'>  </span>If you need to redo a subtask that has
already completed –at your own risk-- then you can delete its number from the
list. But, remember its results might already be merged into the main result). </p>

</div>

</body>

</html>
